from typing import Optional
from dataclasses import dataclass

from crawler.downloaders import (
    IDownloader
)

from crawler.parsers import (
    IParser
)

@dataclass
class Source:
    title: str
    priority: int
    description: str
    cooldown: int
    payload: dict
    downloader: IDownloader
    parser: IParser
    
    def download(
        self
    ) -> Optional[str]:
        content = self.downloader.download(
            payload=self.payload,
        )
        return content

    def parse(
        self,
        content: str
    ) -> Optional[dict]:
        parsed = self.parser.parse(
            content=content
        )
        return parsed