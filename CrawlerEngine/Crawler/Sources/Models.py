from typing import Union
from datetime import timedelta

from pydantic import (
    BaseModel, 
    HttpUrl
)

class DownloaderModel(BaseModel):
    name: str
    seed_url: HttpUrl
    timeout: int = None
    cookies: dict[str, str] = None
    headers: dict[str, str] = None

class ParserModel(BaseModel):
    name: str
    root: str
    fields: dict
    separator: str = None

class SourceModel(BaseModel):
    title: str
    priority: int
    description: str
    cooldown: int
    payload: dict[str, Union[str, timedelta]]
    downloader: DownloaderModel
    parser: ParserModel